@model CoursePageViewModel
@{
    ViewData["Title"] = "Courses";
}

<div class="d-flex justify-content-between m-3">
    <h3>Courses</h3>
    <a href="~/admin/courses/create" class="btn btn-primary">
        <span><i class="far fa-plus-square"></i></span>
        Create Course
    </a>
</div>

<div class="d-flex justify-content-between m-3">
    <page-link page-list-view-model="@Model.PageList" page-action="Courses"></page-link>
    <div>
        <select class="select-custom select" name-path ="/admin/courses" name-parameter="type" asp-items="@(new SelectList(Model.CourseTypes, "Id", "Name",ViewBag.SelectedType))">
            <option value="">All Types</option>
        </select>
        <select class="select-custom select" name-path="/admin/courses" name-parameter="group" asp-items="@(new SelectList(Model.CourseGroups, "Id", "Name",ViewBag.SelectedGroup))">
            <option value="">All Groups</option>
        </select>
    </div>
</div>

<div class="m-3 p-3 bg-white">
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Type</th>
                <th scope="col">Group</th>
                <th scope="col">Trainers</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>

            @foreach(var item in Model.Courses)
            {
                <tr>
                    <th scope="row">@item.Name</th>
                    <td>@item.CourseType.Name</td>
                    <td>@item.CourseGroup.Name</td>
                    <td rowspan="2">
                        <div class="d-flex flex-column">
                            @foreach (var itemTrainer in item.TrainerViewModels)
                            {
                                <a href="#" class="font-weight-bold" data-toggle="modal" data-target="#trainerInformationModal" data-bs-id="@itemTrainer.Id">
                                    @itemTrainer.FullName
                                </a>
                            }
                        </div>
                    </td>
                    <td rowspan="2">
                        <div class="d-flex flex-column">
                            <a href="~/admin/courses/@item.Id" class="btn btn-outline-primary mb-1">
                                <span><i class="fas fa-exclamation"></i></span>
                            </a>
                            <a href="~/admin/courses/update/@item.Id" class="btn btn-outline-warning mb-1">
                                <span><i class="fas fa-pen"></i></span>
                            </a>
                            <a href="~/admin/courses/trainers/@item.Id" class="btn btn-outline-warning mb-1">
                                <span><i class="fas fa-user-friends"></i></span>
                            </a>
                            <a href="~/admin/courses/delete/@item.Id" class="btn btn-outline-danger">
                                <span><i class="fas fa-trash-alt"></i></span>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">@item.Description</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@await Html.PartialAsync("_TrainerInformationModalWindowPartial")

@section JSFiles{
    <script src="~/js/Course.js"></script>
    <script src="~/js/TrainerInformationModalWindow.js"></script>
}
